{% extends "base.html" %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">Admin Dashboard</h1>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div class="bg-white p-4 rounded shadow">
        <p class="text-sm text-gray-500">Products</p>
        <p class="text-2xl font-bold">{{ product_count }}</p>
    </div>
    <div class="bg-white p-4 rounded shadow">
        <p class="text-sm text-gray-500">Orders</p>
        <p class="text-2xl font-bold">{{ order_count }}</p>
    </div>
    <div class="bg-white p-4 rounded shadow">
        <p class="text-sm text-gray-500">Total Revenue</p>
        <p class="text-2xl font-bold">₹{{ "%.2f"|format(total_revenue) }}</p>
    </div>
</div>

<h2 class="text-xl font-semibold mb-2">Latest Orders</h2>
<div class="bg-white rounded shadow">
    <table class="w-full text-sm">
        <tr class="border-b">
            <th class="p-2 text-left">ID</th>
            <th class="p-2 text-left">Customer</th>
            <th class="p-2">Total</th>
            <th class="p-2">Status</th>
            <th class="p-2">Date</th>
        </tr>
        {% for o in latest_orders %}
            <tr class="border-b">
                <td class="p-2">
                    <a href="{{ url_for('admin_order_detail', order_id=o.id) }}" class="text-blue-600">#{{ o.id }}</a>
                </td>
                <td class="p-2">{{ o.customer_name }}</td>
                <td class="p-2 text-center">₹{{ "%.2f"|format(o.total_amount) }}</td>
                <td class="p-2 text-center">{{ o.status }}</td>
                <td class="p-2 text-center">{{ o.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            </tr>
        {% endfor %}
        {% if latest_orders|length == 0 %}
            <tr><td colspan="5" class="p-2 text-center text-gray-500">No orders yet.</td></tr>
        {% endif %}
    </table>
</div>

<div class="mt-4 flex space-x-4">
    <a href="{{ url_for('admin_products') }}" class="bg-gray-900 text-white px-4 py-2 rounded">Manage Products</a>
    <a href="{{ url_for('admin_orders') }}" class="bg-gray-700 text-white px-4 py-2 rounded">Manage Orders</a>
</div><a href="{{ url_for('admin_categories') }}"
   class="bg-pink-600 text-white px-4 py-2 rounded">
   Manage Categories
</a>

{% endblock %}
